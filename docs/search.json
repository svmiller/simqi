[{"path":"http://svmiller.com/articles/linear-model.html","id":"a-brief-description-of-the-data","dir":"Articles","previous_headings":"","what":"A (Brief) Description of the Data","title":"Simulating Quantities of Interest in a Linear Model","text":"som_sample subset SOM surveys Sweden. Swedish corollary General Social Survey United States offers wide-reaching assessment Swedish public opinion various aspects society, politics, mass media. Deep knowledge Sweden required tutorial though kind comfort modeling public opinion data assumed.","code":"som_sample #> # A tibble: 2,841 × 14 #>     year  idnr lan      lptrust satisdem trust_rf attitude_eu   age female  edu3 #>    <dbl> <dbl> <chr>      <dbl>    <dbl>    <dbl>       <dbl> <dbl>  <dbl> <dbl> #>  1  2019 10003 Dalarna…   1.08         3        4           4    58      0     3 #>  2  2019 10004 Halland…  -0.296        3        3           3    76      1     1 #>  3  2019 10005 Örebro …  -0.343        2        2           4    66      0     3 #>  4  2019 10007 Västman…   0.512        4        3           4    62      0     2 #>  5  2019 10008 Stockho…   1.08         4        4           4    46      1     2 #>  6  2019 10009 Dalarna…  -2.08         1        1           1    24      0     2 #>  7  2019 10011 Västman…   0.346        3        3           3    69      0     2 #>  8  2019 10012 Söderma…  -2.08         1        5           2    85      0     3 #>  9  2019 10013 Västra …  -0.106        3        3           3    68      1     2 #> 10  2019 10014 Östergö…   1.08         3        2           4    31      1     2 #> # ℹ 2,831 more rows #> # ℹ 4 more variables: ideo <dbl>, hinc <dbl>, resarea <dbl>, interestp <dbl>"},{"path":"http://svmiller.com/articles/linear-model.html","id":"a-simple-linear-model-with-no-frills","dir":"Articles","previous_headings":"","what":"A Simple Linear Model with No Frills","title":"Simulating Quantities of Interest in a Linear Model","text":"Let’s run simple linear model regressing respondent’s latent political trust (lptrust) age (age, years), whether self-identify woman (female), educational attainment (edu3) “low” (1), “medium” (2), “high” (3) categories. codebook offers information political trust variable created. Understand, now, higher values lptrust = “” political trust variable approximates standard normal distribution. Let’s use lm() regress political trust three things. find discernible effect age political trust. Partialing gender education, young old discernibly different latent political trust. effect female edu3 positive significant. wanted unpack gender difference . data_grid() modelr can help us creating hypothetical prediction grid based data model, generating hypothetical person median age (54) educational attainment (“medium”). hypothetical person differ gender. One woman . sim_qi() take model (M1) prediction grid created “new data” simulate nsim values dependent variable (default: 1000) model’s vector coefficients variance-covariance matrix. can optionally toggle return_newdata = TRUE help us post-processing. simulated values latent political trust returned column called y Sims object created. , can summarize simulated values political trust comparing men women like . certainly fancier summary techniques available, especially visually, fundamental takeaway suggests mean simulated values political trust “typical woman” .032 whereas -.168 “typical man”. ’s difference .20 scale. truly differences men women expected values political trust, simulations betray . 90% interval summarizing distribution women lower bound -.011. upper bound men -.128. two overlap.","code":"M1 <- lm(lptrust ~ age + female + edu3, som_sample) summary(M1) #>  #> Call: #> lm(formula = lptrust ~ age + female + edu3, data = som_sample) #>  #> Residuals: #>      Min       1Q   Median       3Q      Max  #> -2.31830 -0.56330  0.01424  0.60836  2.90961  #>  #> Coefficients: #>               Estimate Std. Error t value Pr(>|t|)     #> (Intercept) -0.5963148  0.0876567  -6.803 1.25e-11 *** #> age          0.0004956  0.0009539   0.520    0.603     #> female       0.2000629  0.0337581   5.926 3.47e-09 *** #> edu3         0.2006343  0.0252937   7.932 3.07e-15 *** #> --- #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 #>  #> Residual standard error: 0.8922 on 2837 degrees of freedom #> Multiple R-squared:  0.03823,    Adjusted R-squared:  0.03721  #> F-statistic: 37.59 on 3 and 2837 DF,  p-value: < 2.2e-16 som_sample %>%     data_grid(.model = M1,               female = c(0, 1)) -> newdat  newdat #> # A tibble: 2 × 3 #>   female   age  edu3 #>    <dbl> <dbl> <dbl> #> 1      0    54     2 #> 2      1    54     2 Sims <- sim_qi(M1, nsim = 100, newdata = newdat, return_newdata = TRUE) Sims #> # A tibble: 200 × 5 #>          y   sim female   age  edu3 #>      <dbl> <int>  <dbl> <dbl> <dbl> #>  1 -0.156      1      0    54     2 #>  2  0.0484     1      1    54     2 #>  3 -0.185      2      0    54     2 #>  4  0.0142     2      1    54     2 #>  5 -0.154      3      0    54     2 #>  6  0.0509     3      1    54     2 #>  7 -0.200      4      0    54     2 #>  8  0.0893     4      1    54     2 #>  9 -0.163      5      0    54     2 #> 10  0.0187     5      1    54     2 #> # ℹ 190 more rows Sims %>%     summarize(lwr = quantile(y, .05),               mean = mean(y),               upr = quantile(y, .95),               .by = female) #> # A tibble: 2 × 4 #>   female     lwr    mean     upr #>    <dbl>   <dbl>   <dbl>   <dbl> #> 1      0 -0.214  -0.168  -0.128  #> 2      1 -0.0116  0.0325  0.0770 Sims %>%     summarize(lwr = quantile(y, .05),               mean = mean(y),               upr = quantile(y, .95),               .by = female) %>%     mutate(cat = c(\"Men\", \"Women\")) %>%     ggplot(.,aes(cat, mean, ymin=lwr, ymax=upr)) +     theme_steve() +     geom_pointrange() +     coord_flip() +     labs(y = \"Simulated Values of Political Trust (with 90% Intervals)\",          x = \"\",          title = \"Simulated Values of Latent Political Trust, by Men and Women\",          subtitle = \"A visual summary better emphasizes what the model communicates, and what the simulations are telling you.\",          caption = \"?som_sample in {simqi} (by way of SOM).\")"},{"path":"http://svmiller.com/articles/linear-model.html","id":"a-linear-model-with-interactive-effects","dir":"Articles","previous_headings":"","what":"A Linear Model with Interactive Effects","title":"Simulating Quantities of Interest in a Linear Model","text":"interested interactive relationship age gender? {simqi} flexible well. First, let’s center age variable subtracting mean. ’s strictly necessary identifying interactive relationships, really good practice make sure naturally occurring zero things interacted. one mean age data (.e. age can integer), ’ve least shifted zero newborns (won’t appear data) center distribution. results simple model suggest 1) higher levels age coincide political trust among women, 2) women average age higher levels political trust non-women, 3) indeed statistically significant interaction age gender. “look like”? , sim_qi() comes rescue. Let’s create another newdata data frame, one also allow age variable take unique values (approximate full range age). Admittedly, getting used transformed variables like can wonky ’re new. , let’s get actual age equivalents c_age just information handy post-processing. Now, let’s sim_qi() thing. summarize accordingly….","code":"som_sample %>%     mutate(c_age = age - mean(age)) -> Data  M2 <- lm(lptrust ~ c_age*female + edu3, Data) summary(M2) #>  #> Call: #> lm(formula = lptrust ~ c_age * female + edu3, data = Data) #>  #> Residuals: #>      Min       1Q   Median       3Q      Max  #> -2.37950 -0.55882  0.00423  0.62647  3.00678  #>  #> Coefficients: #>               Estimate Std. Error t value Pr(>|t|)     #> (Intercept)  -0.572262   0.062305  -9.185  < 2e-16 *** #> c_age         0.003180   0.001340   2.374   0.0177 *   #> female        0.200172   0.033716   5.937 3.25e-09 *** #> edu3          0.200213   0.025262   7.925 3.24e-15 *** #> c_age:female -0.005307   0.001862  -2.850   0.0044 **  #> --- #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 #>  #> Residual standard error: 0.8911 on 2836 degrees of freedom #> Multiple R-squared:  0.04098,    Adjusted R-squared:  0.03963  #> F-statistic: 30.29 on 4 and 2836 DF,  p-value: < 2.2e-16 Data %>%     data_grid(.model = M2,               female = c(0, 1),               c_age = unique(c_age)) -> newdat  newdat #> # A tibble: 140 × 3 #>    female c_age  edu3 #>     <dbl> <dbl> <dbl> #>  1      0 -36.2     2 #>  2      0 -35.2     2 #>  3      0 -34.2     2 #>  4      0 -33.2     2 #>  5      0 -32.2     2 #>  6      0 -31.2     2 #>  7      0 -30.2     2 #>  8      0 -29.2     2 #>  9      0 -28.2     2 #> 10      0 -27.2     2 #> # ℹ 130 more rows Data %>%     distinct(c_age, age) %>% arrange(age) %>%     left_join(newdat, .) -> newdat #> Joining with `by = join_by(c_age)`  newdat #> # A tibble: 140 × 4 #>    female c_age  edu3   age #>     <dbl> <dbl> <dbl> <dbl> #>  1      0 -36.2     2    16 #>  2      0 -35.2     2    17 #>  3      0 -34.2     2    18 #>  4      0 -33.2     2    19 #>  5      0 -32.2     2    20 #>  6      0 -31.2     2    21 #>  7      0 -30.2     2    22 #>  8      0 -29.2     2    23 #>  9      0 -28.2     2    24 #> 10      0 -27.2     2    25 #> # ℹ 130 more rows Sims <- sim_qi(M2, nsim = 100, newdata = newdat, return_newdata = TRUE) Sims #> # A tibble: 14,000 × 6 #>         y   sim female c_age  edu3   age #>     <dbl> <int>  <dbl> <dbl> <dbl> <dbl> #>  1 -0.276     1      0 -36.2     2    16 #>  2 -0.272     1      0 -35.2     2    17 #>  3 -0.268     1      0 -34.2     2    18 #>  4 -0.265     1      0 -33.2     2    19 #>  5 -0.261     1      0 -32.2     2    20 #>  6 -0.257     1      0 -31.2     2    21 #>  7 -0.254     1      0 -30.2     2    22 #>  8 -0.250     1      0 -29.2     2    23 #>  9 -0.246     1      0 -28.2     2    24 #> 10 -0.243     1      0 -27.2     2    25 #> # ℹ 13,990 more rows Sims %>%     mutate(cat = ifelse(female == 1, \"Women\", \"Not Women\")) %>%         summarize(lwr = quantile(y, .05),               mean = mean(y),               upr = quantile(y, .95),               .by = c(cat, age)) %>%     ggplot(.,aes(age, mean, ymin=lwr, ymax=upr, color=cat, linetype=cat, fill=cat)) +     theme_steve() +     geom_line() +     geom_ribbon(alpha=.2, color='black') +     labs(title = \"Simulated Values of Political Trust, Interacting Gender and Age\",          subtitle = \"Interaction terms can be wonky to interpret from the regression output. Simulate them to make sense of them!\",          y = \"Simulated Values of Political Trust (with 90% Intervals)\",          x = \"\",          color = \"\", linetype = \"\", fill = \"\",          caption = \"?som_sample in {simqi} (by way of SOM).\")"},{"path":"http://svmiller.com/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Steve Miller. Author, maintainer.","code":""},{"path":"http://svmiller.com/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Miller S (2025). simqi: Simulate Quantities Interest Regression Models. R package version 0.1.9.","code":"@Manual{,   title = {simqi: Simulate Quantities of Interest from Regression Models},   author = {Steve Miller},   year = {2025},   note = {R package version 0.1.9}, }"},{"path":"http://svmiller.com/index.html","id":"simulate-quantities-of-interest-from-regression-models","dir":"","previous_headings":"","what":"Simulate Quantities of Interest from Regression Models","title":"Simulate Quantities of Interest from Regression Models","text":"{simqi} allows researchers simulate -called “quantities interest” common regression models. method generating quantities interest comes simulation multivariate normal distribution, vector means regression coefficients sigma variance-covariance matrix regression model.","code":""},{"path":"http://svmiller.com/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Simulate Quantities of Interest from Regression Models","text":"can also install development version package devtools package.","code":"devtools::install_github(\"svmiller/simqi\")"},{"path":"http://svmiller.com/reference/kgss_sample.html","id":null,"dir":"Reference","previous_headings":"","what":"A Sample of Korean General Social Survey Data, 2023 — kgss_sample","title":"A Sample of Korean General Social Survey Data, 2023 — kgss_sample","text":"simple sample Korean General Social Survey (KGSS) data 2023.","code":""},{"path":"http://svmiller.com/reference/kgss_sample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A Sample of Korean General Social Survey Data, 2023 — kgss_sample","text":"","code":"kgss_sample"},{"path":"http://svmiller.com/reference/kgss_sample.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"A Sample of Korean General Social Survey Data, 2023 — kgss_sample","text":"data frame following variables. year numeric vector communicating year survey respid numeric vector communicating unique identifier respondent age numeric vector communicating age respondent female numeric vector communicating whether respondent self-identifies woman man employed dummy variable whether respondent employed 'employed' unived dummy variable whether respondent four-year university degree netuse numeric vector hours internet usage respondent ideo numeric vector communicating ideology respondent 1-5 scale. 1 = \"liberal\". 5 = \"conservative\" si_gbh numeric vector extent respondent considers gender-based hatred (toward men women) serious issue. 1 = 'serious'. 5 = 'serious ' satisfin numeric vector communicating respondent's satisfaction financial situation. 1 = 'dissatisfied'. 5 = 'satisfied' fp_mord numeric vector whether respondent thinks maintaining order important priority South Korea. fpcat character vector respondent believes important priority South Korea. Possible values: \"Maintain Order\", \"Fight Rising Prices\", \"Give People Say\", \"Protect Freedom Speech\". cntryaffq character vector country respondent feels closest. Possible values include \"USA\", \"China\", \"North Korea\", \"Russia\", \"Japan\".","code":""},{"path":"http://svmiller.com/reference/kgss_sample.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"A Sample of Korean General Social Survey Data, 2023 — kgss_sample","text":"Missingness substantial one reason . data complete cases . problematic purpose, want make note . Data created based English version data made available Survey Research Center Sung Kyun Kwan University.","code":""},{"path":"http://svmiller.com/reference/sim_qi.html","id":null,"dir":"Reference","previous_headings":"","what":"Get simulations from a model object — sim_qi","title":"Get simulations from a model object — sim_qi","text":"sim_qi() function simulate quantities interest regression model","code":""},{"path":"http://svmiller.com/reference/sim_qi.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get simulations from a model object — sim_qi","text":"","code":"sim_qi(   mod,   nsim = 1000,   newdata,   original_scale = TRUE,   return_newdata = FALSE,   vcov = NULL )"},{"path":"http://svmiller.com/reference/sim_qi.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get simulations from a model object — sim_qi","text":"mod model object nsim number simulations run, defaults 1,000 newdata data frame hypothetical prediction grid. absent, defaults model frame. original_scale logical, defaults TRUE. TRUE, ensuing simulations returned original scale. FALSE, ensuing simulations transformed practical/intuitive quantity potentially intuitive user (e.g. probability logistic regression). argument ignored context simulations linear model. return_newdata logical, defaults FALSE. TRUE, output returns additional columns corresponding inputs provided newdata. may facilitate easier transformation along greater clarity simulations correspond. vcov manual variance-covariance matrix supply simulation process. Use caution, kind --fly standard error adjustment regression model make results \"robust\". nothing supplied, model's default variance-covariance matrix used.","code":""},{"path":"http://svmiller.com/reference/sim_qi.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get simulations from a model object — sim_qi","text":"sim_qi() returns data frame (tibble) quantities interest identifying information particular simulation number. linear models, simple generalized linear models dependent variable either \"\" \"\", quantity interest returned single column (called y). models underlying estimation dependent variable , lack better term, \"multiple\" (e.g. ordinal models basic proportional odds assumption), columns returned correspond number distinct values outcome. example, ordinal model five unique values dependent variable return columns y1, y2, y3, y4, y5.","code":""},{"path":"http://svmiller.com/reference/sim_qi.html","id":"supported-models","dir":"Reference","previous_headings":"","what":"Supported Models","title":"Get simulations from a model object — sim_qi","text":"Linear models produced lm() base R. Generalized linear models produced glm(). Families (links) include: Binomial (logit, probit) Poisson (log) Cumulative link models produced ordinal package. Links: logit, probit","code":""},{"path":"http://svmiller.com/reference/sim_qi.html","id":"what-original-scale-does-in-this-function","dir":"Reference","previous_headings":"","what":"What original_scale Does in This Function","title":"Get simulations from a model object — sim_qi","text":"original_scale defaults TRUE function. TRUE, simulated quantity returned quantity \"original scale.\" Understanding exactly means requires knowledge model question exactly model estimating behalf. simple linear model produced lm() function base R, straightforward (, thus, argument nothing model). quantity returned estimated value dependent variable. However, models kind link function return fitted values particular scale might user-friendly (e.g. probit index, natural logged odds). However, \"original scale\" fitted values returned. summary table may help better understand argument respect want. ordinal models, recommend setting original_scale FALSE. function, underneath hood, actually calculating things level probability. just transforming back natural logged odds probit index, say want.","code":""},{"path":"http://svmiller.com/reference/sim_qi.html","id":"other-details","dir":"Reference","previous_headings":"","what":"Other Details","title":"Get simulations from a model object — sim_qi","text":"Specifying variable newdata exact name dependent variable (e.g. mpg simple example provided documentation file) necessary matrix multiplication purposes. function done . recommend letting function . matrix multiplication purposes, column function creates default 0. (?) matter simulations. nothing supplied newdata, model.frame() called simulations run data inform model . recommend , works debugging purposes. function builds implicit assumption dependent variable regression model called y. Nothing function misbehave (far know) dependent variable called y model, may lead confusion interpret results simulations. simulated values always returned column called y. Factors (-called \"fixed effects\") behave curiously function. now, function politely assume factors present newdata create (even want ). Future updates try understand behavior better. loss efficiency simulation procedure, especially interested simulated values dependent variable particular combinations factor variable.","code":""},{"path":"http://svmiller.com/reference/sim_qi.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get simulations from a model object — sim_qi","text":"","code":"set.seed(8675309)  M1 <- lm(mpg ~ hp + am, mtcars)  newdat <- data.frame(am = c(0,1), hp = 123)  sim_qi(M1, nsim = 100, newdat, return_newdata = TRUE) #> # A tibble: 200 × 4 #>        y   sim    am    hp #>    <dbl> <int> <dbl> <dbl> #>  1  18.9     1     0   123 #>  2  25.0     1     1   123 #>  3  19.3     2     0   123 #>  4  24.4     2     1   123 #>  5  20.5     3     0   123 #>  6  25.5     3     1   123 #>  7  18.9     4     0   123 #>  8  26.2     4     1   123 #>  9  20.2     5     0   123 #> 10  24.2     5     1   123 #> # ℹ 190 more rows"},{"path":"http://svmiller.com/reference/som_sample.html","id":null,"dir":"Reference","previous_headings":"","what":"A Sample of SOM Institute Data, 2019-2020 — som_sample","title":"A Sample of SOM Institute Data, 2019-2020 — som_sample","text":"simple sample SOM (Society-Opinion-Media) data run University Gothenburg. sample comes cumulative data set (v. 2021-1) observations 2019-2020. SOM Institute Cumulative Dataset contains data National SOM study, annually repeated cross-sectional self-administered mail survey conducted Sweden since 1986. think Swedish corollary General Social Survey United States. use various testing purposes.","code":""},{"path":"http://svmiller.com/reference/som_sample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A Sample of SOM Institute Data, 2019-2020 — som_sample","text":"","code":"som_sample"},{"path":"http://svmiller.com/reference/som_sample.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"A Sample of SOM Institute Data, 2019-2020 — som_sample","text":"data frame 2841 observations following 14 variables. year numeric vector communicating year survey idnr numeric vector communicating unique identifier respondent lan character vector county respondent lives lptrust numeric vector communicating term \"political trust\" respondent. include information variable details section. satisdem numeric vector, ranging 1-4, communicating satisfaction democracy Sweden. 1 = satisfied. 4 = satisfied. trust_rf numeric vector, ranging 1-5, communicating trust royal family Sweden. 1 = low trust. 5 = high trust. attitude_eu numeric vector, ranging 1-5, communicating attitude respondent toward European Union. 1 = negative. 5 = positive. age numeric vector communicating age respondent female numeric vector communicating whether respondent self-identifies woman man edu3 numeric vector ranging 1-3 communicating education-level attained. 1 = \"low\" (grade 9). 2 = \"medium\" (grade 9, university). 3 = \"high\" (.e. least university) ideo numeric vector communicating ideology respondent 1-5 scale. 1 = \"clearly left\". 5 = \"clearly right\" hinc numeric vector communicating gross household income respondent 1-5 scale. 1 = \"low\". 5 = \"high\". resarea numeric vector communicating area respondent lives. 1 = \"rural area\". 2 = \"village\". 3 = \"city/town\". 4 = \"Stockholm/Gothenburg/Malmö\". interestp numeric vector communicating respondent's interest politics. 1 = \"interested\". 4 = \"interested\".","code":""},{"path":"http://svmiller.com/reference/som_sample.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"A Sample of SOM Institute Data, 2019-2020 — som_sample","text":"Missingness substantial one reason . data complete cases . problematic purpose, want make note . political trust variable simple latent estimate derived graded response model items original data trust government (aa10a), trust parliament (aa10n), trust political parties (aa10q), trust Swedish politicians (ab12). first three items 1-5 scales last one (Swedish politicians) 1-4 scale. items reverse coded original scales user interpret ensuing latent estimate communicating higher political trust higher values scale. user also free question just valid measure political trust , though add factor loadings four items low .81 high .91. proportional variance .764. variables satisfaction democracy, trust royal family, attitude European Union, interest politics reverse coded original scale. SOM unique long-standing survey data sets aware allowing respondents self-identify gender. 2019 2020, 71 21,195 respondents self-identified way (case-exclusions). remove observations data. understand codebook correctly, household income variable coded SOM's researchers self-placement respondent. may want explicitly factor residential area variable, though basically presented data.","code":""},{"path":"http://svmiller.com/news/index.html","id":"simqi-020","dir":"Changelog","previous_headings":"","what":"simqi 0.2.0","title":"simqi 0.2.0","text":"vcov arguments allow custom variance-covariance matrices (like “robust” standard errors). Optimize newdata spare user create placeholder column DV prediction grid. Various stops/warnings added make sure sim_qi() works intended. Documentation updates.","code":""},{"path":"http://svmiller.com/news/index.html","id":"simqi-010","dir":"Changelog","previous_headings":"","what":"simqi 0.1.0","title":"simqi 0.1.0","text":"CRAN release: 2025-02-17 Initial development offering.","code":""}]
